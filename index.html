<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Basic Layout - jQuery EasyUI Demo</title>
	<link rel="stylesheet" type="text/css" href="jquery-easyui-1.4.2/themes/default/easyui.css">
	<link rel="stylesheet" type="text/css" href="jquery-easyui-1.4.2/themes/icon.css">
	<link rel="stylesheet" type="text/css" href="jquery-easyui-1.4.2/demo/demo.css">
    <link rel="stylesheet" type="text/css" href="css/default.css">
	<script src="jquery-easyui-1.4.2/jquery.min.js"></script>
	<script src="jquery-easyui-1.4.2/jquery.easyui.min.js"></script>
</head>
<body class="easyui-layout">
	<div data-options="region:'north',border:false" style="height:50px;background:#B3DFDA; padding-right:10px; line-height: 50px;text-align: right;">
    	    <a href="#" class="easyui-linkbutton" data-options="plain:true">Home</a>
            <a href="#" class="easyui-menubutton" data-options="menu:'#mm1',iconCls:'icon-edit'">Edit</a>
            <a href="#" class="easyui-menubutton" data-options="menu:'#mm2',iconCls:'icon-help'">Help</a>
            <a href="#" class="easyui-menubutton" data-options="menu:'#mm3'">About</a>
        <div id="mm1" style="width:150px;">
            <div data-options="iconCls:'icon-undo'">Undo</div>
            <div data-options="iconCls:'icon-redo'">Redo</div>
            <div class="menu-sep"></div>
            <div>Cut</div>
            <div>Copy</div>
            <div>Paste</div>
            <div class="menu-sep"></div>
            <div>
                <span>Toolbar</span>
                <div>
                    <div>Address</div>
                    <div>Link</div>
                    <div>Navigation Toolbar</div>
                    <div>Bookmark Toolbar</div>
                    <div class="menu-sep"></div>
                    <div>New Toolbar...</div>
                </div>
            </div>
            <div data-options="iconCls:'icon-remove'">Delete</div>
            <div>Select All</div>
        </div>
        <div id="mm2" style="width:100px;">
            <div>Help</div>
            <div>Update</div>
            <div>About</div>
        </div>
        <div id="mm3" class="menu-content" style="background:#f0f0f0;padding:10px;text-align:left">
            <img src="http://www.jeasyui.com/images/logo1.png" style="width:150px;height:50px">
            <p style="font-size:14px;color:#444;">Try jQuery EasyUI to build your modern, interactive, javascript applications.</p>
        </div>
    </div>
	<div data-options="region:'west',split:true,title:'菜单'" style="width:200px;">
    	<div id="nav">
        <!--  导航内容 -->
        </div>
    </div>
	<div data-options="region:'east',split:true,collapsed:true,title:'East'" style="width:100px;padding:10px;">east region</div>
	<div data-options="region:'south',border:false" style="height:50px;background:#A9FACD;padding:10px;">south region</div>
	<div data-options="region:'center'" >
    	<div id="tt" class="easyui-tabs">
            <div title="About" style="padding:10px">
                <h2>Basic Form</h2>
                <p>Fill the form and submit it.</p>
                <div style="margin:20px 0;"></div>
                <div class="easyui-panel" title="New Topic" style="width:600px">
                    <div style="padding: 10px auto 20px;">
                    <form id="ff" method="post">
                        <table cellpadding="5" style="border-collapse: collapse; " border=" 1px" bordercolor="#CCCCCC">
                            <tr>
                                <td>Name:</td>
                                <td><input class="easyui-textbox" type="text" name="name" data-options="required:true"></input></td>
                                <td>Name:</td>
                                <td><input class="easyui-textbox" type="text" name="name" data-options="required:true"></input></td>
                            </tr>
                            <tr>
                                <td>Email:</td>
                                <td colspan="3"><input class="easyui-textbox" type="text" name="email" data-options="required:true,validType:'email'" style="width:300px;height:32px"></input></td>
                            </tr>
                            <tr>
                                <td>Subject:</td>
                                <td><input class="easyui-textbox" type="text" name="subject" data-options="required:true"></input></td>
                            </tr>
                            <tr>
                                <td>Message:</td>
                                <td><input class="easyui-textbox" name="message" data-options="multiline:true" style="height:60px"></input></td>
                            </tr>
                            <tr>
                                <td>Language:</td>
                                <td>
                                    <select class="easyui-combobox" name="language"><option value="ar">Arabic</option><option value="bg">Bulgarian</option><option value="uk">Ukrainian</option><option value="vi">Vietnamese</option></select>
                                </td>
                            </tr>
                        </table>
                    </form>
                    <div style="text-align:center;padding:5px">
                        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="submitForm()">Submit</a>
                        <a href="javascript:void(0)" class="easyui-linkbutton" onclick="clearForm()">Clear</a>
                    </div>
                    </div>
                </div>
            </div>
            <div title="My Documents" style="padding:10px">
                <ul class="easyui-tree" data-options="url:'tree_data1.json',method:'get',animate:true"></ul>
                <span class="icon icon-users"></span>
            </div>
            <div title="Help" data-options="iconCls:'icon-help',closable:true" style="padding:10px">
                This is the help content.
            </div>
        </div>
    </div>
    <div id="index_tabsMenu" style="display: none;">
		<div title="refresh" data-options="iconCls:' icon-refresh'">刷新</div>
		<div class="menu-sep"></div>
		<div title="close" data-options="iconCls:' icon-remove'">关闭</div>
		<div title="closeOther" data-options="iconCls:' icon-remove'">关闭其他</div>
		<div title="closeAll" data-options="iconCls:' icon-remove'">关闭所有</div>
	</div>
    <script>
    	function addTab(title, url){
			if ($('#tt').tabs('exists', title)){
				$('#tt').tabs('select', title);
			} else {
				var content = '<iframe scrolling="auto" frameborder="0"  src="'+url+'" style="width:100%;height:100%;"></iframe>';
				$('#tt').tabs('add',{
					title:title,
					content:content,
					closable:true
				});
			}
		}
		
//初始化左侧
function InitLeftMenu() {

	$("#nav").accordion({animate:false,fit:true,border:false});
	var selectedPanelname = '';
    $.ajax({
		type : "get",
		dataType : "json",
		url : "json/menu.json",
		data : {
		},
		success : function(result) {
			$.each(result, function(i, n) {
				var menulist ='';
				menulist +='<ul class="navlist">';
				$.each(n.menus, function(j, o) {
					menulist += '<li><div><a ref="'+o.menuid+'" href="#" rel="' + o.url + '" ><span class="icon '+o.icon+'" >&nbsp;</span><span class="nav" style="font-size:13px;">' + o.menuname + '</span></a></div> ';
		
					if(o.menus && o.menus.length>0)
					{
						//li.find('div').addClass('icon-arrow');
		
						menulist += '<ul class="third_ul">';
						$.each(o.menus,function(k,p){
							menulist += '<li><div><a ref="'+p.menuid+'" href="#" rel="' + p.url + '" ><span class="icon '+o.icon+'">&nbsp;</span><span class="nav" style="font-size:13px;">' + p.menuname + '</span></a></div> </li>'
						});
						menulist += '</ul>';
					}
					menulist+='</li>';
				})
				menulist += '</ul>';
				$('#nav').accordion('add', {
					title: n.menuname,
					content: menulist,
					border:false,
					iconCls: ' icon '+n.icon
				});
				$(".icon-user").attr("style","line-height:19px;");
				if(i==0)
					selectedPanelname =n.menuname;
			});
			
			$('#nav').accordion('select',selectedPanelname);

			$('.navlist li a').click(function(){
				var tabTitle = $(this).children('.nav').text();
		
				var url = $(this).attr("rel");
				var menuid = $(this).attr("ref");
				var icon = $(this).find('.icon').attr('class');
				if($(this).parent().siblings().html())
				{
					$('.third_ul').slideUp();
					var ul =$(this).parent().next();
					if(ul.is(":hidden"))
						ul.slideDown();
					else
						ul.slideUp();
				}
				else{
					addTab(tabTitle,url,icon);
					$('.navlist li div').removeClass("selected");
					$(this).parent().addClass("selected");
				}
			}).hover(function(){
				$(this).parent().addClass("hover");
			},function(){
				$(this).parent().removeClass("hover");
			});
			
		},
		error : function() {
			//请求出错处理
			$.messager.show({
				title:'提醒',
				msg:"有错误",
				timeout:5000,
				showType:'slide'
			});
		}
	});

}
$(function(){
	InitLeftMenu();
	
	var index_tabs = $('#tt').tabs({
		fit : true,
		border : false,
		onContextMenu : function(e, title) {
			e.preventDefault();
			index_tabsMenu.menu('show', {
				left : e.pageX,
				top : e.pageY
			}).data('tabTitle', title);
		}
	});
	
	var index_tabsMenu = $('#index_tabsMenu').menu({
		onClick : function(item) {
			var curTabTitle = $(this).data('tabTitle');
			var type = $(item.target).attr('title');
			if (type === 'refresh') {
				var t = index_tabs.tabs('getTab', curTabTitle).panel() ;
				t.panel('refresh');
				return;
			}

			if (type === 'close') {
				var t = index_tabs.tabs('getTab', curTabTitle);
				if (t.panel('options').closable) {
					index_tabs.tabs('close', curTabTitle);
				}
				return;
			}

			var allTabs = index_tabs.tabs('tabs');
			var closeTabsTitle = [];

			$.each(allTabs, function() {
				var opt = $(this).panel('options');
				if (opt.closable && opt.title != curTabTitle && type === 'closeOther') {
					closeTabsTitle.push(opt.title);
				} else if (opt.closable && type === 'closeAll') {
					closeTabsTitle.push(opt.title);
				}
			});
			for ( var i = 0; i < closeTabsTitle.length; i++) {
				index_tabs.tabs('close', closeTabsTitle[i]);
			}
		}
	});
	
});
    </script>
</body>
</html>